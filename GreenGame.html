<!DOCTYPE html>
<html>
<head>
  <title>GreenByte Challenge</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #e8f5e9;
      text-align: center;
      padding: 20px;
    }
    .card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      width: 70%;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #388e3c;
    }
    input {
      padding: 8px;
      margin: 10px;
    }
    table {
      width: 80%;
      margin: auto;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ddd;
    }
    th {
      background-color: #4caf50;
      color: white;
    }
  </style>
</head>

<body>

<h1>üåø GreenByte Challenge</h1>

<!-- Profile Screen -->
<div class="card" id="profileCard">
  <h2>Create / Load Profile</h2>
  <input type="text" id="username" placeholder="Enter your name">
  <br>
  <button onclick="loadProfile()">Start Game</button>
  <button onclick="showLeaderboard()">View Leaderboard</button>
</div>

<!-- Game Screen -->
<div class="card" id="gameCard" style="display:none;">
  <h3>Player: <span id="playerName"></span></h3>
  <h3>Score: <span id="score">0</span></h3>
  <h3>Level: <span id="level">1</span></h3>

  <p id="question"></p>
  <button onclick="choose(0)" id="btn0"></button>
  <button onclick="choose(1)" id="btn1"></button>

  <p id="feedback"></p>
</div>

<!-- Leaderboard Screen -->
<div class="card" id="leaderboardCard" style="display:none;">
  <h2>üèÜ Leaderboard</h2>
  <table>
    <thead>
      <tr>
        <th>Rank</th>
        <th>Player</th>
        <th>Score</th>
      </tr>
    </thead>
    <tbody id="leaderboardBody"></tbody>
  </table>
  <br>
  <button onclick="goHome()">Back</button>
</div>

<script>
let profiles = JSON.parse(localStorage.getItem("greenProfiles")) || {};
let currentUser = "";
let score = 0;
let current = 0;
let level = 1;

const questions = [
  { q: "What should you do with an old phone?", o: ["Recycle it", "Throw it away"], a: 0 },
  { q: "Which energy source is greener?", o: ["Solar", "Coal"], a: 0 },
  { q: "Best way to reduce e-waste?", o: ["Reuse devices", "Buy new often"], a: 0 },
  { q: "Which saves energy?", o: ["Sleep mode", "Leaving PC on"], a: 0 },
  { q: "Eco-friendly monitor choice?", o: ["LED", "CRT"], a: 0 },
  { q: "What reduces carbon footprint?", o: ["Cloud optimization", "Unused servers"], a: 0 },
  { q: "Proper disposal of batteries?", o: ["Special recycling", "Normal trash"], a: 0 },
  { q: "Green data center uses?", o: ["Renewables", "Diesel only"], a: 0 },
  { q: "Which is sustainable?", o: ["Energy-efficient CPUs", "Overclocked CPUs"], a: 0 },
  { q: "Paper usage should be?", o: ["Minimized", "Maximized"], a: 0 },
  { q: "Which helps sustainability?", o: ["Virtualization", "More hardware"], a: 0 },
  { q: "What saves power?", o: ["Dark mode", "High brightness"], a: 0 },
  { q: "Green networking involves?", o: ["Efficient routing", "Always-on devices"], a: 0 },
  { q: "Best practice for laptops?", o: ["Charge responsibly", "Always plugged in"], a: 0 },
  { q: "What promotes green IT?", o: ["Eco policies", "Ignoring impact"], a: 0 }
];

function loadProfile() {
  const name = document.getElementById("username").value.trim();
  if (!name) return alert("Please enter a name");

  currentUser = name;
  if (!profiles[name]) profiles[name] = { score: 0 };

  score = profiles[name].score;
  current = 0;
  level = 1;

  document.getElementById("playerName").innerText = name;
  document.getElementById("score").innerText = score;

  document.getElementById("profileCard").style.display = "none";
  document.getElementById("leaderboardCard").style.display = "none";
  document.getElementById("gameCard").style.display = "block";

  loadQuestion();
}

function loadQuestion() {
  const q = questions[current];
  document.getElementById("question").innerText = q.q;
  document.getElementById("btn0").innerText = q.o[0];
  document.getElementById("btn1").innerText = q.o[1];
  document.getElementById("feedback").innerText = "";

  if (current === 5) level = 2;
  if (current === 10) level = 3;
  document.getElementById("level").innerText = level;
}

function choose(choice) {
  if (choice === questions[current].a) {
    score += 10;
    document.getElementById("feedback").innerText = "‚úÖ Correct! Sustainable choice!";
  } else {
    document.getElementById("feedback").innerText = "‚ùå Not the greenest option.";
  }

  profiles[currentUser].score = Math.max(profiles[currentUser].score, score);
  localStorage.setItem("greenProfiles", JSON.stringify(profiles));

  document.getElementById("score").innerText = score;
  current++;

  if (current < questions.length) {
    setTimeout(loadQuestion, 1000);
  } else {
    setTimeout(() => {
      alert("Game Over! Final Score: " + score);
      showLeaderboard();
    }, 1000);
  }
}

function showLeaderboard() {
  document.getElementById("profileCard").style.display = "none";
  document.getElementById("gameCard").style.display = "none";
  document.getElementById("leaderboardCard").style.display = "block";

  const body = document.getElementById("leaderboardBody");
  body.innerHTML = "";

  const sorted = Object.entries(profiles)
    .sort((a, b) => b[1].score - a[1].score);

  sorted.forEach((entry, index) => {
    const row = `<tr>
      <td>${index + 1}</td>
      <td>${entry[0]}</td>
      <td>${entry[1].score}</td>
    </tr>`;
    body.innerHTML += row;
  });
}

function goHome() {
  document.getElementById("leaderboardCard").style.display = "none";
  document.getElementById("profileCard").style.display = "block";
}
</script>

</body>
</html>
